{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Invoice",
  "description": "JSON schema for extracting and validating invoice data, including vendor, buyer, line items, and total amount.",
  "type": "object",
  "properties": {
    "invoice_number": {
      "type": "string",
      "trimStart": [ "INV/", "INV-", "INV", "INV#" ]
    },
    "invoice_date": {
      "type": "string",
      "format": "date"
    },
    "vendor": {
      "type": "object",
      "description": "Seller information.",
      "properties": {
        "name": { "type": "string" },
        "tax_registration_id": {
          "type": "string",
          "trimStart": [ "VAT", "TVA", "GSTIN/UIN" ]
        },
        "email": {
          "type": "string",
          "format": "email"
        }
      },
      "required": [ "name" ]
    },
    "bill_to": {
      "type": "object",
      "description": "Buyer information.",
      "properties": {
        "name": {
          "type": "string",
          "trimStart": [ "Monsieur ", "Madame ", "Prof ", "Doctor ", "Mrs ", "Mr ", "Ms ", "Mlle " ]
        },
        "street_address": { "type": "string" },
        "city": { "type": "string" },
        "postal_code": { "type": "string" },
        "country": {
          "type": "string",
          "description": "Two-letter country code.",
          "enum": [ "DE", "FR", "US", "ES", "IN", "EC", "UY", "UK", "PE", "VE", "CO", "AO", "CA", "AE", "" ]
        },
        "phone": { "type": "string" },
        "email": {
          "type": "string",
          "format": "email"
        },
        "site": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": [ "name", "street_address", "city", "state", "postal_code", "country" ]
    },
    "items": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "description": { "type": "string" },
          "quantity": { "type": "number" },
          "unit_price_net": {
            "type": "number",
            "description": "Unit price without tax."
          },
          "total_price_gross": {
            "type": "number",
            "description": "Line total including tax."
          }
        },
        "required": [ "description", "quantity", "unit_price_net", "total_price_gross" ]
      }
    },
    "total_amount": {
      "type": "number",
      "description": "Total invoice amount including tax."
    }
  },
  "required": [ "invoice_number", "invoice_date", "vendor", "bill_to", "items", "total_amount" ]
}